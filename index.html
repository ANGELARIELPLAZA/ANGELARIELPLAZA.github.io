<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Invitación de Boda — S&A</title>

  <!-- Fuentes -->
  <link
    href="https://fonts.googleapis.com/css2?family=Beau+Rivage&family=Great+Vibes&family=Italianno&family=Tangerine:wght@400;700&display=swap"
    rel="stylesheet">
  <!-- Estilos -->
  <link rel="stylesheet" href="style/style.unified.css" />

  <script defer>
    // ===========================================
    // 5) Galería tipo “stack” con swipe
    // ===========================================
    document.addEventListener('DOMContentLoaded', () => {
      const stack = document.getElementById('gStack');
      if (!stack) return;

      const resetBtn = document.getElementById('gReset');
      const emptyMsg = document.getElementById('gEmpty');
      const original = stack.innerHTML;

      let currentCard = null;
      let startX = 0, startY = 0, dx = 0, dy = 0, dragging = false;

      const THRESHOLD = 90; // px para considerar swipe
      const ROTATION = 18;  // deg de rotación visual

      const topCard = () => stack.querySelector('.g-card');

      const applyTransform = (el, x, y) => {
        const rot = (x / Math.max(320, window.innerWidth)) * ROTATION;
        el.style.transform = `translate(${x}px, ${y}px) rotate(${rot}deg)`;
      };

      const start = (e) => {
        currentCard = topCard();
        if (!currentCard) return;
        dragging = true;
        const p = (e.touches?.[0]) || e;
        startX = p.clientX;
        startY = p.clientY;
        dx = 0; dy = 0;
        currentCard.style.transition = 'none';
      };

      const move = (e) => {
        if (!dragging || !currentCard) return;
        const p = (e.touches?.[0]) || e;
        dx = p.clientX - startX;
        dy = p.clientY - startY;
        if (Math.abs(dx) > Math.abs(dy)) e.preventDefault(); // dar prioridad al swipe horizontal
        applyTransform(currentCard, dx, dy);
      };

      const end = () => {
        if (!dragging || !currentCard) return;
        dragging = false;

        if (Math.abs(dx) > THRESHOLD) {
          const dirClass = dx > 0 ? 'g-right' : 'g-left';
          currentCard.classList.add(dirClass);
          currentCard.style.transition = '';
          currentCard.addEventListener('transitionend', function removeOnce() {
            this.removeEventListener('transitionend', removeOnce);
            if (this.parentElement === stack) stack.removeChild(this);
            if (!topCard()) emptyMsg.style.display = 'block';
          });
        } else {
          currentCard.style.transition = 'transform .25s ease';
          currentCard.style.transform = '';
        }
      };

      const reset = () => {
        stack.innerHTML = original;
        emptyMsg.style.display = 'none';
      };

      // Eventos mouse
      stack.addEventListener('mousedown', start);
      stack.addEventListener('mousemove', move);
      document.addEventListener('mouseup', end);

      // Eventos touch
      stack.addEventListener('touchstart', start, { passive: false });
      stack.addEventListener('touchmove', move, { passive: false });
      stack.addEventListener('touchend', end);
      stack.addEventListener('touchcancel', end);

      resetBtn?.addEventListener('click', reset);
    });
  </script>
</head>

<body>
  <div class="desktop-warning" role="alert" aria-live="polite">
    <p>Esta invitación está disponible únicamente en móvil.</p>
  </div>

  <main id="root">
    <div class="audio-player" role="region" aria-label="Reproductor de música">
      <audio id="bgMusic" src="./mp3/musica.mp3" preload="auto" loop playsinline aria-hidden="true"></audio>
      <button type="button" id="playMusicBtn" class="audio-player__control" aria-controls="bgMusic"
        aria-pressed="false">
        <span class="audio-player__icon" aria-hidden="true">▶</span>
        <span class="audio-player__label">Reproduce nuestra cancion</span>
      </button>
    </div>

    <button type="button" id="scrollToRsvp" class="scroll-to-rsvp" aria-label="Ir a la sección de confirmar asistencia">
      <span class="scroll-to-rsvp__icon" aria-hidden="true">⬇</span>
      <span class="scroll-to-rsvp__label">Confirmar asistencia</span>
    </button>

    <!-- ==================== Sección 1: Portada ==================== -->
    <section class="section" id="s1">
      <article class="card card--hero">
        <img src="./img/Fondo_portada_arriba.png" alt="" class="card__media2 flower flower--tl" aria-hidden="true"
          role="presentation">
        <img class="card__media1" alt="Pareja al atardecer" src="./img/IMAGEN1.jpeg" />

        <div class="overlay">
          <blockquote>
            <p class="quote-text">“Mi amado es mío, y yo soy suya.”</p>
            <footer class="quote-ref">— Cantares 2:16</footer>
          </blockquote>
          <h1 class="iniciales" aria-label="Iniciales de los novios">S|A</h1>
          <h2 class="textnoscasamos">¡Nos casamos!</h2>

          <div class="countdown" id="countdown">
            <div class="box">
              <div class="number" id="days">00</div>
              <div class="labelcount">Días</div>
            </div>
            <div class="box">
              <div class="number" id="hours">00</div>
              <div class="labelcount">Horas</div>
            </div>
            <div class="box">
              <div class="number" id="minutes">00</div>
              <div class="labelcount">Min</div>
            </div>
            <div class="box">
              <div class="number" id="seconds">00</div>
              <div class="labelcount">Seg</div>
            </div>
          </div>

          <div class="swipe-indicator" aria-hidden="true">
            <span class="swipe-indicator__icon" aria-hidden="true"></span>
            <span class="swipe-indicator__text">Desliza hacia arriba</span>
          </div>
        </div>
      </article>
    </section>

    <!-- ==================== Sección 2: Familia ==================== -->
    <section id="s2" class="section" aria-labelledby="s2-title">
      <article class="card card--family">
        <!-- Decoración superior -->
        <picture aria-hidden="true">
          <source srcset="./img/Fondo_Sec2_arriba.png" media="(min-width: 768px)">
          <img class="card__media card__media--top" src="./img/Fondo_Sec2_arriba.png" alt="" loading="lazy"
            decoding="async">
        </picture>

        <header class="family-header">
          <h2 id="s2-title" class="family-title font-tangerine">Con la bendición de nuestros queridos padres</h2>
          <div class="family-divider" aria-hidden="true"></div>
        </header>

        <div class="parents-grid" aria-label="Padres de los novios">
          <!-- Padres de la novia -->
          <section class="parents-col" aria-labelledby="parents-bride">
            <h3 id="parents-bride" class="parents-title font-tangerine">Padres de la novia</h3>
            <ul class="parents-list">
              <li class="font-great">Crisóforo Molina H.</li>
              <li aria-hidden="true" class="amp font-italianno">&amp;</li>
              <li class="font-great">Enriqueta Cazarin L.</li>
            </ul>
          </section>

          <!-- Padres del novio -->
          <section class="parents-col" aria-labelledby="parents-groom">
            <h3 id="parents-groom" class="parents-title font-tangerine">Padres del novio</h3>
            <ul class="parents-list">
              <li class="font-great">Ángel Alberto Plaza R.</li>
              <li aria-hidden="true" class="amp font-italianno">&amp;</li>
              <li class="font-great">Ángela Janely Acuña G.</li>
            </ul>
          </section>
        </div>

        <!-- Novios -->
        <div class="couple-wrap" aria-live="polite">
          <p class="couple-eyebrow">Nosotros</p>
          <p class="couple-names font-italianno">Sinai <span class="amp" aria-hidden="true">&amp;</span> Ariel</p>
        </div>

        <p class="invite-line">
          Con gran alegría, les invitamos a compartir un nuevo capítulo de nuestra historia de amor:
        </p>
        <p class="invite-cta font-italianno">Nuestra boda.</p>

        <!-- Decoración inferior -->
        <picture aria-hidden="true">
          <source srcset="./img/Fondo_Sec2_abajo.png" media="(min-width: 768px)">
          <img class="card__media card__media--bottom" src="./img/Fondo_Sec2_abajo.png" alt="" loading="lazy"
            decoding="async">
        </picture>
      </article>
    </section>

    <!-- ==================== Sección 3: Ubicación ==================== -->
    <section class="section" id="s6">
      <article class="card card--venue" aria-labelledby="s6-title">
        <div class="venue-media">
          <img class="card__media" alt="Salón decorado con luces cálidas"
            src="./img/salon.jpg?q=80&w=1600&auto=format&fit=crop" />
        </div>

        <div class="venue-body">
          <header class="venue-header">
            <h2 id="s6-title" class="venue-title font-tangerine">Nuestro lugar especial</h2>
            <p class="venue-intro">Acompáñanos a celebrar la ceremonia civil y la recepción en un espacio acogedor donde
              cada detalle está pensado para compartir con ustedes.</p>
          </header>

          <div class="venue-highlight" aria-label="28 de diciembre de 2025, 4:00 pm">
            <img src="./img/flor_1.png" alt="" class="flower2 flower--tr" aria-hidden="true" role="presentation">
            <div class="venue-calendar" aria-hidden="true">
              <span class="venue-day">28</span>
              <span class="venue-month">Dic</span>
              <span class="venue-year">2025</span>
            </div>
            <div class="venue-schedule">
              <h3 class="venue-event" itemprop="name">Ceremonia Civil y Recepción</h3>
              <time class="venue-time" datetime="2025-12-28T16:00:00-06:00" itemprop="startDate">4:00 pm</time>
              <p class="venue-place" itemprop="location" itemscope itemtype="https://schema.org/Place">
                <span itemprop="name">Salón de eventos California</span><br>
                <span itemprop="address">Hueyapan de Ocampo, Veracruz</span>
              </p>
            </div>
          </div>
          <div class="venue-actions">
            <a class="venue-btn" href="https://maps.app.goo.gl/J2DysbKQvpvysB4r6" target="_blank" rel="noopener">
              Cómo llegar
            </a>
          </div>
        </div>
      </article>
    </section>

    <!-- ==================== Sección 4: Itinerario ==================== -->
    <section class="section" id="s7">
      <div class="card">
        <div class="card-body">
          <h2 class="section4">Itinerario</h2>
          <img src="./img/flor_2.png" alt="" class="flower--bl" aria-hidden="true" role="presentation">

          <div class="timeline">
            <div class="timeline-item left">
              <div class="timeline-content">
                <h3>04:00 pm</h3>
                <img src="./icons/wedding-arch.png" alt="Icono ceremonia civil" class="timeline-icon">
                <p>Ceremonia civil</p>
              </div>
            </div>

            <div class="timeline-item right">
              <div class="timeline-content">
                <h3>05:00 pm</h3>
                <img src="./icons/wine.png" alt="Icono recepción" class="timeline-icon">
                <p>Recepción</p>
              </div>
            </div>

            <div class="timeline-item left">
              <div class="timeline-content">
                <h3>07:00 pm</h3>
                <img src="./icons/restaurant.png" alt="Icono cena" class="timeline-icon">
                <p>Cena</p>
              </div>
            </div>

            <div class="timeline-item right">
              <div class="timeline-content">
                <h3>09:00 pm</h3>
                <img src="./icons/dance.png" alt="Icono baile" class="timeline-icon">
                <p>Bailes</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- ==================== Sección 5: Galería ==================== -->
    <section class="section" id="s8">
      <div class="card">
        <div class="card-body">
          <h2 class="section5">Momentos</h2>
          <div class="g-stack-wrap">
            <div class="g-stack" id="gStack" aria-live="polite">
              <div class="g-card"><img src="./img/IMG2.jpeg" alt="Foto 2"></div>
              <div class="g-card"><img src="./img/IMG3.jpeg" alt="Foto 3"></div>
              <div class="g-card"><img src="./img/IMG4.jpeg" alt="Foto 4"></div>
              <div class="g-card"><img src="./img/IMG5.jpeg" alt="Foto 5"></div>
              <div class="g-card"><img src="./img/IMG6.jpeg" alt="Foto 6"></div>
              <div class="g-card"><img src="./img/IMG7.jpeg" alt="Foto 7"></div>
              <div class="g-card"><img src="./img/IMG8.jpeg" alt="Foto 8"></div>
              <div class="g-card"><img src="./img/IMG9.jpeg" alt="Foto 9"></div>
              <div class="g-card"><img src="./img/IMG10.jpeg" alt="Foto 10"></div>
              <div class="g-card"><img src="./img/IMG11.jpeg" alt="Foto 11"></div>
            </div>
            <div class="g-hint">Desliza a la izquierda o derecha para ver las fotos</div>
            <div class="g-actions">
              <button class="g-btn" id="gReset" type="button">⟲ Reiniciar</button>
            </div>
            <div class="g-empty" id="gEmpty" style="display:none">¡Sin más fotos! Presiona “Reiniciar”.</div>
          </div>
        </div>
      </div>
    </section>

    <!-- ==================== Sección 6: Código de Vestimenta ==================== -->
    <section class="section" id="s9">
      <div class="card">
        <div class="card-body">
          <img src="./img/Fondo_portada_arriba.png" alt="" class="mirror-x" aria-hidden="true" role="presentation">

          <div class="dc-in">
            <h2 class="dc-eyebrow">Código de Vestimenta:</h2>
            <p class="dc-style" id="dc-title">Formal</p>
            <p class="dc-note"><span class="dc-highlight">Evitar</span> vestimenta completa de los siguientes colores:
            </p>

            <ul class="dc-grid" role="list" aria-label="Colores a evitar">
              <li class="dc-chip" aria-label="Blanco">
                <span class="dc-swatch dc-white"><span class="dc-x">✕</span></span>
                <span class="dc-chip-label">Blanco</span>
              </li>
              <li class="dc-chip" aria-label="Verde olivo claro">
                <span class="dc-swatch dc-olive"><span class="dc-x">✕</span></span>
                <span class="dc-chip-label">Verde olivo claro</span>
              </li>
              <li class="dc-chip" aria-label="Beige / arena">
                <span class="dc-swatch dc-beige"><span class="dc-x">✕</span></span>
                <span class="dc-chip-label">Beige / arena</span>
              </li>
              <li class="dc-chip" aria-label="Azul marino">
                <span class="dc-swatch dc-navy"><span class="dc-x">✕</span></span>
                <span class="dc-chip-label">Azul marino</span>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- ==================== Sección 7: RSVP ==================== -->
    <section class="section" id="s10">
      <div class="card">
        <div class="card-body">
          <div class="card-title section10">Tu presencia es muy importante para nosotros, por lo que nos gustaría que
            nos confirmaras antes del 2 de diciembre</div>
          <div class="actions">
            <a href="https://wa.me/5219211024671?text=%C2%A1Hola!%20Quiero%20confirmar%20mi%20asistencia%20a%20la%20boda.%20Mi%20nombre%20es%20[Tu%20Nombre]."
              target="_blank" rel="noopener" class="btn">
              Confirmar por WhatsApp
            </a>
          </div>
        </div>
        <img src="./img/Fondo_Sec2_abajo.png" alt="" class="card__media card__media--bottom" aria-hidden="true">
      </div>
    </section>
    <!-- ==================== Sección 8: Detalles de Hospedaje ==================== -->
    <section class="section" id="hotel-info">
      <div class="card hotel-info">
        <div class="card-body hotel-info__body">
          <header class="hotel-info__header">
            <h2 class="hotel-info__title">Detalles de hospedaje</h2>
            <p class="hotel-info__subtitle">Tenemos una opción especial muy cerca del salón</p>
          </header>

          <div class="hotel-info__content">
            <p class="hotel-info__note">Reserva con anticipación y menciona que asistirás a nuestra boda para
              mantener la tarifa preferencial.</p>
            <button type="button" id="hotelInfoButton" class="btn hotel-info__button">
              Ver detalles de hospedaje
            </button>
          </div>
        </div>
      </div>
    </section>
  </main>

  <div class="image-modal" id="hotelImageModal" aria-hidden="true" role="dialog" aria-modal="true"
    aria-labelledby="hotelModalTitle">
    <div class="image-modal__backdrop" data-dismiss-modal></div>
    <div class="image-modal__dialog" role="document">
      <header class="image-modal__header">
        <h2 class="image-modal__title" id="hotelModalTitle">Hospedaje recomendado</h2>
        <button type="button" class="image-modal__close" aria-label="Cerrar detalles"
          data-dismiss-modal>&times;</button>
      </header>
    </div>
  </div>

  <!-- ======= Scripts finales: audio + countdown ======= -->
  <script>
    (function () {
      // Reproducir audio al primer gesto (móvil/desktop)
      const audio = document.getElementById('bgMusic');
      const playBtn = document.getElementById('playMusicBtn');
      const icon = playBtn?.querySelector('.audio-player__icon');
      const label = playBtn?.querySelector('.audio-player__label');

      const scrollBtn = document.getElementById('scrollToRsvp');
      const rsvpSection = document.getElementById('s10');
      if (scrollBtn && rsvpSection) {
        scrollBtn.addEventListener('click', () => {
          rsvpSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
        });
      }

      const hotelInfoButton = document.getElementById('hotelInfoButton');
      const hotelModal = document.getElementById('hotelImageModal');
      const dismissControls = hotelModal?.querySelectorAll('[data-dismiss-modal]');
      const hotelSlides = hotelModal ? Array.from(hotelModal.querySelectorAll('.image-modal__figure')) : [];
      const hotelPagination = hotelModal?.querySelector('.image-modal__pagination');
      const hotelNavButtons = hotelModal ? Array.from(hotelModal.querySelectorAll('[data-carousel-dir]')) : [];
      let currentHotelSlide = 0;

      let lastFocusedElement = null;

      const updateHotelSlide = (index) => {
        if (!hotelSlides.length) return;
        const totalSlides = hotelSlides.length;
        currentHotelSlide = (index + totalSlides) % totalSlides;
        hotelSlides.forEach((slide, slideIndex) => {
          const isActive = slideIndex === currentHotelSlide;
          slide.classList.toggle('is-active', isActive);
          slide.setAttribute('aria-hidden', String(!isActive));
        });
        if (hotelPagination) {
          const activeSlide = hotelSlides[currentHotelSlide];
          const hotelName = activeSlide?.getAttribute('data-hotel-name');
          hotelPagination.textContent = hotelName
            ? `${hotelName} (${currentHotelSlide + 1} de ${totalSlides})`
            : `Hotel ${currentHotelSlide + 1} de ${totalSlides}`;
          hotelPagination.toggleAttribute('hidden', totalSlides <= 1);
        }
        hotelNavButtons.forEach((button) => {
          button.toggleAttribute('hidden', totalSlides <= 1);
        });
      };

      const changeHotelSlide = (step) => {
        if (!hotelSlides.length) return;
        updateHotelSlide(currentHotelSlide + step);
      };

      const closeHotelModal = () => {
        if (!hotelModal) return;
        hotelModal.setAttribute('aria-hidden', 'true');
        document.removeEventListener('keydown', handleModalKeyDown);
        if (lastFocusedElement) {
          lastFocusedElement.focus({ preventScroll: true });
          lastFocusedElement = null;
        }
      };

      const openHotelModal = () => {
        if (!hotelModal) return;
        lastFocusedElement = document.activeElement instanceof HTMLElement ? document.activeElement : null;
        hotelModal.setAttribute('aria-hidden', 'false');
        updateHotelSlide(0);
        const closeBtn = hotelModal.querySelector('.image-modal__close');
        closeBtn?.focus({ preventScroll: true });
        document.addEventListener('keydown', handleModalKeyDown);
      };

      function handleModalKeyDown(event) {
        if (event.key === 'Escape') {
          event.preventDefault();
          closeHotelModal();
          return;
        }
        if (event.key === 'ArrowLeft') {
          event.preventDefault();
          changeHotelSlide(-1);
          return;
        }
        if (event.key === 'ArrowRight') {
          event.preventDefault();
          changeHotelSlide(1);
        }
      }

      hotelInfoButton?.addEventListener('click', openHotelModal);

      hotelNavButtons.forEach((button) => {
        button.addEventListener('click', () => {
          const direction = button.getAttribute('data-carousel-dir');
          if (direction === 'next') {
            changeHotelSlide(1);
          } else if (direction === 'prev') {
            changeHotelSlide(-1);
          }
        });
      });

      dismissControls?.forEach((control) => {
        control.addEventListener('click', closeHotelModal);
      });

      const setPlayingState = (isPlaying) => {
        if (!playBtn) return;
        playBtn.classList.toggle('is-playing', isPlaying);
        playBtn.setAttribute('aria-pressed', String(isPlaying));
        if (icon) icon.textContent = isPlaying ? '⏸' : '▶';
        if (label) label.textContent = isPlaying ? 'Pausar' : 'Reproducir';
      };

      const playMusic = () => {
        if (!audio) return;
        audio.muted = false;   // por si inicia silenciado en algunos navegadores
        audio.volume = 0.7;    // ajusta a gusto
        const attempt = audio.play();
        if (attempt?.catch) attempt.catch(console.warn);
        return attempt;
      };

      if (audio) {
        setPlayingState(!audio.paused);
        audio.addEventListener('play', () => setPlayingState(true));
        audio.addEventListener('pause', () => setPlayingState(false));
      }

      function unlockAndPlay() {
        const attempt = playMusic();
        if (!attempt?.then) setPlayingState(true);

        // Eliminar listeners (solo una vez)
        window.removeEventListener('pointerdown', unlockAndPlay);
        window.removeEventListener('click', unlockAndPlay);
        window.removeEventListener('touchend', unlockAndPlay);
      }

      if (playBtn && audio) {
        playBtn.addEventListener('click', () => {
          if (audio.paused) {
            const attempt = playMusic();
            if (!attempt?.then) setPlayingState(true);
          } else {
            audio.pause();
          }
        });
      }
      window.addEventListener('pointerdown', unlockAndPlay, { once: true });
      window.addEventListener('click', unlockAndPlay, { once: true });
      window.addEventListener('touchend', unlockAndPlay, { once: true, passive: true });

      // Cuenta regresiva (zona horaria CDMX -06:00)
      (function setupCountdown() {
        const countdownEl = document.getElementById('countdown');
        if (!countdownEl) return;

        const dEl = document.getElementById('days');
        const hEl = document.getElementById('hours');
        const mEl = document.getElementById('minutes');
        const sEl = document.getElementById('seconds');

        // Ajusta la hora EXACTA de inicio del evento si cambia
        const countdownDate = new Date('2025-12-28T16:00:00-06:00').getTime();

        const timer = setInterval(() => {
          const now = Date.now();
          const distance = countdownDate - now;

          if (distance < 0) {
            clearInterval(timer);
            countdownEl.innerHTML = '<p>¡Llegó el gran día!</p>';
            return;
          }

          const days = Math.floor(distance / (1000 * 60 * 60 * 24));
          const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
          const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
          const seconds = Math.floor((distance % (1000 * 60)) / 1000);

          if (dEl) dEl.textContent = String(days).padStart(2, '0');
          if (hEl) hEl.textContent = String(hours).padStart(2, '0');
          if (mEl) mEl.textContent = String(minutes).padStart(2, '0');
          if (sEl) sEl.textContent = String(seconds).padStart(2, '0');
        }, 1000);
      })();
    })();
  </script>
</body>

</html>