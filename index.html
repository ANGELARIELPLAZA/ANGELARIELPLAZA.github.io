<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Invitación de Boda — Recorrido en 6 secciones</title>
  <style>
    /* --------- Reset mínimo --------- */
    *, *::before, *::after { box-sizing: border-box; }
    html, body { margin: 0; padding: 0; height: 100%; }
    img { display: block; max-width: 100%; height: auto; }

    /* --------- Tipografía / Colores --------- */
    :root{
      --bg: #fffaf7;
      --text: #2c2c2c;
      --muted: #6b6b6b;
      --brand: #b57a6a;         /* rosa tostado */
      --brand-2: #d9c6be;       /* arena suave */
      --card: #ffffff;
      --shadow: 0 10px 24px rgba(0,0,0,.10);
      --radius: 18px;
    }

    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: var(--bg);
      color: var(--text);
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      scroll-behavior: smooth; /* apoyo para scrollIntoView */
    }

    /* --------- Layout con scroll-snap (ideal móvil) --------- */
    main{
      scroll-snap-type: y mandatory;
      overflow-y: auto;
      height: 100dvh; /* 100% de viewport dinámico en móvil */
    }
    section.section{
      min-height: 100dvh;
      display: grid;
      place-items: center;
      padding: 20px;
      scroll-snap-align: start;
      scroll-snap-stop: always;
      background: linear-gradient(180deg, rgba(217,198,190,.25), rgba(255,250,247,1));
    }

    /* --------- Tarjetas --------- */
    .card{
      width: min(920px, 94vw);
      background: var(--card);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
    }
    .card__media{
      aspect-ratio: 16/9;
      width: 100%;
      object-fit: cover;
      background: #eee;
    }
    .card__body{
      padding: clamp(16px, 3.5vw, 28px);
    }
    .eyebrow{
      text-transform: uppercase;
      letter-spacing: .12em;
      font-size: .78rem;
      color: var(--brand);
      margin: 0 0 8px 0;
      font-weight: 700;
    }
    h2{
      margin: 0 0 6px 0;
      font-size: clamp(1.4rem, 4.5vw, 2rem);
    }
    p{ color: var(--muted); margin: 8px 0 0 0; }

    /* --------- Botón de inicio fijo --------- */
    .start-wrap{
      position: fixed;
      inset: auto 12px 16px 12px; /* bottom */
      display: grid;
      place-items: center;
      z-index: 50;
      pointer-events: none; /* permite clics solo en el botón */
    }
    .start-btn{
      pointer-events: auto;
      border: 0;
      border-radius: 999px;
      padding: 14px 18px;
      font-size: 1rem;
      font-weight: 700;
      background: var(--brand);
      color: white;
      box-shadow: var(--shadow);
    }

    /* --------- Indicador sutil --------- */
    .hint{
      position: fixed;
      top: 12px; right: 12px;
      background: rgba(0,0,0,.55);
      color: #fff;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: .8rem;
      z-index: 40;
      opacity: .0;
      transform: translateY(-8px);
      transition: opacity .4s ease, transform .4s ease;
      user-select: none;
    }
    .hint.show{ opacity: 1; transform: translateY(0); }

    /* --------- Accesibilidad (reduce motion) --------- */
    @media (prefers-reduced-motion: reduce){
      main{ scroll-snap-type: none; }
    }
  </style>
</head>
<body>
  <!-- Indicador (aparece cuando inicia el recorrido) -->
  <div id="hint" class="hint">Recorrido en curso… toca para pausar</div>

  <!-- Contenido con scroll-snap -->
  <main id="root">

    <!-- Sección 1: Portada -->
    <section class="section" id="s1">
      <article class="card">
        <img class="card__media" alt="Pareja al atardecer" src="https://images.unsplash.com/photo-1529680459049-bf0340fa0755?q=80&w=1600&auto=format&fit=crop" />
        <div class="card__body">
          <p class="eyebrow">Nuestra Boda</p>
          <h2>María &amp; José</h2>
          <p>Nos encantaría celebrar contigo este gran día. Desliza o presiona “Iniciar Recorrido”.</p>
        </div>
      </article>
    </section>

    <!-- Sección 2: Cuándo y dónde -->
    <section class="section" id="s2">
      <article class="card">
        <img class="card__media" alt="Jardín con luces" src="https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=1600&auto=format&fit=crop" />
        <div class="card__body">
          <p class="eyebrow">Cuándo y Dónde</p>
          <h2>Sábado 15 de Noviembre, 5:00 PM</h2>
          <p>Jardín Las Bugambilias · Av. Principal 123 · Ciudad Bella</p>
        </div>
      </article>
    </section>

    <!-- Sección 3: Ceremonia -->
    <section class="section" id="s3">
      <article class="card">
        <img class="card__media" alt="Iglesia elegante" src="https://images.unsplash.com/photo-1503264116251-35a269479413?q=80&w=1600&auto=format&fit=crop" />
        <div class="card__body">
          <p class="eyebrow">Ceremonia</p>
          <h2>Parroquia de San Miguel</h2>
          <p>4:00 PM — Agradecemos llegar con 15 minutos de anticipación para acomodar a todos.</p>
        </div>
      </article>
    </section>

    <!-- Sección 4: Recepción -->
    <section class="section" id="s4">
      <article class="card">
        <img class="card__media" alt="Recepción al aire libre" src="https://images.unsplash.com/photo-1482707272725-473c4f3de1f7?q=80&w=1600&auto=format&fit=crop" />
        <div class="card__body">
          <p class="eyebrow">Recepción</p>
          <h2>Banquete &amp; Celebración</h2>
          <p>Después de la ceremonia, acompáñanos a disfrutar de una noche inolvidable con música, baile y mucha alegría.</p>
        </div>
      </article>
    </section>

    <!-- Sección 5: Dress Code -->
    <section class="section" id="s5">
      <article class="card">
        <img class="card__media" alt="Vestimenta formal" src="https://images.unsplash.com/photo-1490481651871-ab68de25d43d?q=80&w=1600&auto=format&fit=crop" />
        <div class="card__body">
          <p class="eyebrow">Dress Code</p>
          <h2>Formal de Jardín</h2>
          <p>Colores sugeridos: neutros, pastel o tierra. Evitar blanco total.</p>
        </div>
      </article>
    </section>

    <!-- Sección 6: Confirmación (RSVP) -->
    <section class="section" id="s6">
      <article class="card">
        <img class="card__media" alt="Tarjeta RSVP" src="https://images.unsplash.com/photo-1511795409834-ef04bbd61622?q=80&w=1600&auto=format&fit=crop" />
        <div class="card__body">
          <p class="eyebrow">¡Te esperamos!</p>
          <h2>Confirma tu asistencia</h2>
          <p>Escríbenos o confirma en el enlace que te compartimos. ¡Gracias por acompañarnos!</p>
        </div>
      </article>
    </section>

  </main>

  <!-- Botón de inicio/pausa del recorrido -->
  <div class="start-wrap">
    <button id="startBtn" class="start-btn" type="button">Iniciar recorrido</button>
  </div>

  <script>
    (function(){
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)');
      const root = document.getElementById('root');
      const sections = Array.from(root.querySelectorAll('.section'));
      const startBtn = document.getElementById('startBtn');
      const hint = document.getElementById('hint');

      let running = false;
      let stopRequested = false;

      function sleep(ms){ return new Promise(r => setTimeout(r, ms)); }

      function showHint(show){
        if(!hint) return;
        if(show){ hint.classList.add('show'); }
        else { hint.classList.remove('show'); }
      }

      async function autoTour(){
        if(prefersReduced.matches) return; // respeta accesibilidad
        running = true; stopRequested = false; showHint(true);
        startBtn.textContent = 'Pausar recorrido';

        // Identifica la sección más visible para empezar desde ahí
        let startIndex = 0;
        let bestRatio = 0;
        const viewportH = window.innerHeight || document.documentElement.clientHeight;
        sections.forEach((sec, i)=>{
          const rect = sec.getBoundingClientRect();
          const visible = Math.max(0, Math.min(rect.bottom, viewportH) - Math.max(rect.top, 0));
          const ratio = visible / Math.max(1, rect.height);
          if(ratio > bestRatio){ bestRatio = ratio; startIndex = i; }
        });

        for(let i = startIndex; i < sections.length; i++){
          if(stopRequested) break;
          sections[i].scrollIntoView({ behavior: 'smooth', block: 'start' });

          // espera hasta que el scroll se estabilice o se cumpla un timeout
          const settled = await waitForSettle(1400);
          if(!settled) await sleep(600); // colchón extra si hizo falta
          await sleep(800); // pausa entre secciones
        }

        running = false; stopRequested = false; showHint(false);
        startBtn.textContent = 'Repetir recorrido';
      }

      function waitForSettle(timeoutMs){
        return new Promise((resolve)=>{
          const start = performance.now();
          let lastY = root.scrollTop;
          let sameCount = 0;

          function tick(){
            if(stopRequested){ resolve(true); return; }
            const now = performance.now();
            const y = root.scrollTop;
            if(Math.abs(y - lastY) < 0.5){
              sameCount++;
              if(sameCount > 6){ resolve(true); return; }
            } else {
              sameCount = 0; lastY = y;
            }
            if(now - start > timeoutMs){ resolve(false); return; }
            requestAnimationFrame(tick);
          }
          requestAnimationFrame(tick);
        });
      }

      // Alterna entre iniciar y pausar
      startBtn.addEventListener('click', () => {
        if(!running){ autoTour(); }
        else { stopRequested = true; startBtn.textContent = 'Reanudar recorrido'; showHint(false); }
      });

      // Tocar la pantalla también pausa/reanuda (móvil friendly)
      root.addEventListener('pointerdown', () => {
        if(running){ stopRequested = true; startBtn.textContent = 'Reanudar recorrido'; showHint(false); }
      }, { passive: true });

      // Evita que el teclado suba el viewport y rompa el snap (iOS)
      window.addEventListener('focusin', (e)=>{
        if(e.target && (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA')){
          root.style.scrollSnapType = 'none';
        }
      });
      window.addEventListener('focusout', ()=>{ root.style.scrollSnapType = 'y mandatory'; });
    })();
  </script>
</body>
</html>
